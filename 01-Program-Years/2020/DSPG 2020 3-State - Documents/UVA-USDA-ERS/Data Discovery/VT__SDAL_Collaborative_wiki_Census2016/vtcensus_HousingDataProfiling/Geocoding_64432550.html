<!DOCTYPE html>
<html xmlns:mso="urn:schemas-microsoft-com:office:office" xmlns:msdt="uuid:C2F41010-65B3-11d1-A29F-00AA00C14882">
    <head>
        <title></title>
        <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
<!--[if gte mso 9]><xml>
<mso:CustomDocumentProperties>
<mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Editor msdt:dt="string">Mahoney-Nair, Devika Tara (dtn2ep)</mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Editor>
<mso:Order msdt:dt="string">16503500.0000000</mso:Order>
<mso:ComplianceAssetId msdt:dt="string"></mso:ComplianceAssetId>
<mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Author msdt:dt="string">Mahoney-Nair, Devika Tara (dtn2ep)</mso:display_urn_x003a_schemas-microsoft-com_x003a_office_x003a_office_x0023_Author>
<mso:ContentTypeId msdt:dt="string">0x0101006DCC2F98E9817A45A6AD9E25AF1B0AE4</mso:ContentTypeId>
<mso:_SourceUrl msdt:dt="string"></mso:_SourceUrl>
<mso:_SharedFileIndex msdt:dt="string"></mso:_SharedFileIndex>
</mso:CustomDocumentProperties>
</xml><![endif]-->
</head>

    <body class="theme-default aui-theme-default">
        <div id="page">
            <div id="main" class="aui-page-panel">
                <div id="main-header">
                    <div id="breadcrumb-section">
                        <ol id="breadcrumbs">
                            <li class="first">
                                <span><a href="index.html">VT Census Case Studies</a></span>
                            </li>
                                                    <li>
                                <span><a href="64427367.html">Housing Data Profiling, Preparation Process, and Benchmarking</a></span>
                            </li>
                                                </ol>
                    </div>
                    <h1 id="title-heading" class="pagetitle">
                                                <span id="title-text">
                            VT Census Case Studies : Geocoding
                        </span>
                    </h1>
                </div>

                <div id="content" class="view">
                    <div class="page-metadata">
                        
        
    
        
    
        
    
            Created and last modified by <span class='author'> molfe</span> on 04 Jan 2016
                        </div>
                    <div id="main-content" class="wiki-content group">
                    <div class="contentLayout2">
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<p>In order to create estimates and the sub-county level, it was necessary to geo code the final set of parcels. By getting the latitude and longitude, we would then be able to place them with in the appropriate tract and block group.</p><p>External data and in consistent or missing geocodes.</p><p>Goal: <em>Create a set of geocodes that would be consistent within a dataset across years and also across datasets.</em></p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h1 id="Geocoding-Addresses">Addresses</h1><p>In order to geocode, we needed a clean set of addresses. To get this list of clean address, we followed some basic<span style="color: rgb(0,0,0);"> rules: Different addresses for same parcel across the years</span></p><ul><li>Parcels that have no street number + street then street number + <u>same</u> street — add street number to those missing it.</li><li>Parcels that have no street number + street then street number + <u>different</u> street — changes those with out street number to the more complete address (number and street)</li><li>Parcels that have street number + street then <u>different</u> street number + <u>different</u> street + <u>no</u> information — change to match last appearing address</li><li>Parcels that have street number + street then <u>different</u> street number + <u>different</u> street + year built change that coincides with address change — keep both addresses</li><li>Parcels that have minor difference in address (e.g. one number off, st. instead of rd.) — change to match the majority</li><li>Parcels that have same street number + street then different formats of unit numbering — change to match last appearing unit formatting</li><li>Parcels that do not have an address or year built following a set of consistent addresses — keep NAs (inactive parcel)</li><li>Parcels that  do not have an address or year built before a set of consistent addresses — keep NAs (new parcel)</li></ul><hr /></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h1 id="Geocoding-TheGeocodes">The Geocodes</h1><p>BKFS, CoreLogic, and WMLS came with their own set of coordinates. After checking BlackKnight's Arlington Data, we found that these coordinates changes across they years for the same parcel. We received the following information from BKFS about their geocodes: <span class="ZmSearchResult" style="font-size: 14.0px;line-height: 1.42857;"><span class="ZmSearchResult">Latitude</span></span><span style="font-size: 14.0px;line-height: 1.42857;"> </span><span style="font-size: 14.0px;line-height: 1.42857;">and Longitude are populated using <a href="https://www.pitneybowes.com/pr/location-intelligence-software/geocoding/geostan.html" class="external-link" rel="nofollow">Pitney Bowes Geostan </a>address standardization software.  The database used in the software is updated by PB on a monthly basis.  The</span><span style="font-size: 14.0px;line-height: 1.42857;"> </span><span class="ZmSearchResult" style="font-size: 14.0px;line-height: 1.42857;"><span class="ZmSearchResult">latitude</span></span><span style="font-size: 14.0px;line-height: 1.42857;"> </span><span style="font-size: 14.0px;line-height: 1.42857;">and</span><span style="font-size: 14.0px;line-height: 1.42857;"> </span><span class="ZmSearchResult" style="font-size: 14.0px;line-height: 1.42857;"><span class="ZmSearchResult">latitude</span></span><span style="font-size: 14.0px;line-height: 1.42857;"> </span><span style="font-size: 14.0px;line-height: 1.42857;">values represents data provided by PB from different periods of time. See below for more on CoreLogic's geocodes.</span></p><h2 id="Geocoding-GoogleMapsAPI">GoogleMaps API</h2><p>To place into census tract and to merge data sets together (when no parcel number is available), will use latitude and longitude. By making our own set ot geocodes and not relying on the ones in BKFS or CoreLogic, we were able to have a stable set of coordinates both within and across datasets.</p><p>A &quot;Master Address List&quot; was formed with includes Address and geocoded information. New data sets will be merged with this list master list to get necessary geocoded information. For those addresses that are not already in the master list, they will be geocoded and added to the list.</p><p>Geocoded addresses through GoogleAPI via R.</p><ul><li><p>Daily max of 2,500 queries per IP address</p></li><li><p>Paid max is 100,000 queries per account. First 2,500 are free than $0.50 per 1,000</p></li><li><p>Limit of 10 queries per a second.</p></li></ul><p>There are three main types of geocoding: rooftop, approximate, interpolated. The goals is to  have them all rooftop as its the most accurate. Approximate is when google maps does not have that address or a close match so will the the centroid of the smallest known administrative area. Interpolated is when there is no street number or close street number so it takes the center between two points.</p><p>The output includes the following variables</p><ul><li>&quot;lng&quot; – longitude</li><li>&quot;lat&quot; – latitude </li><li>&quot;type&quot; – type of address (premise, route, street_address, subpremise)</li><li>&quot;loctype&quot; – type of geocoding (rooftop, <span style="line-height: 1.42857;">range_interpolated, geometric_center, approximate)</span></li><li>&quot;address&quot; – address google maps ultimately search for (can be different than input)</li><li>&quot;lat.1&quot;, &quot;lat.2&quot;, &quot;lng.1&quot;, &quot;lng.2&quot; – latitudes and longitudes of the <span style="color: rgb(69,90,100);">viewport (&quot;<span style="color: rgb(33,33,33);">the recommended viewport for displaying the returned result, specified as two latitude,longitude values defining the </span><code>southwest</code><span style="color: rgb(33,33,33);"> and</span><code>northeast</code><span style="color: rgb(33,33,33);"> corner of the viewport bounding box. Generally the viewport is used to frame a result when displaying it to a user.&quot;)</span></span></li><li><code>street_address – </code>a precise street address. (address google maps ultimately search for  and can be different than input)</li><li><code>route</code> – street/route address is located on</li><li><code>country</code> – the national political entity the address is located in</li><li><code>administrative_area_level_1</code> – state the address is located in</li><li><code>administrative_area_level_2</code> – county the address is located in</li><li><code>administrative_area_level_3 – district the address is located in </code></li><li><code>locality – city the address is located in</code></li><li><code style="line-height: 1.42857;">neighborhood</code> -- a named neighborhood the address is located in</li><li><code>premise</code> -- a named location that is located at the address, e.g a building or collection of buildings with a common name</li><li><code style="line-height: 1.42857;">postal_code</code> -- a postal code for the address</li><li>postal_code_suffix – the postal code +4 for the address</li><li><code>natural_feature</code> – a prominent natural feature listed at the address</li><li><code>airport</code> – an airport listed at the address</li><li><code>park</code> – a named park listed at the address</li><li><code>point_of_interest</code> – a named point of interest listed at the address.</li></ul><p>The data fields listed here are fields we received back. For more potential fields, see: <a href="https://developers.google.com/maps/documentation/geocoding/intro" class="external-link" rel="nofollow">https://developers.google.com/maps/documentation/geocoding/intro</a></p><p>When geocoding, there is an inherent level of error (e.g. error created due to satellite technology). Thus, some outputted coordinates were outside Arlington County's line even though it is an Arlington County residence.</p></div>
</div>
</div>
<div class="columnLayout single" data-layout="single">
<div class="cell normal" data-type="normal">
<div class="innerCell">
<h3 id="Geocoding-ArlingtonCounty">Arlington County</h3><p>Arlington County Real Estate Data formed the base of this &quot;Master Address List&quot; with 61,341 unique addresses.</p><ul><li>Took approximately 17 hours to run.</li><li>Of this, there were 415 errors<ul><li>6 came back with no results</li><li>17 came back with results outside of Virginia</li><li>368 came back with &quot;approximate&quot; loctype (how Google found the coordinates) and gave the center of Arlington County</li></ul></li><li>These were re-ran to include state in the address. 380 Errors remained<ul><li>None were missing</li><li>11 came back with results outside of Virginia</li><li>383 came back with &quot;approximate&quot; or &quot;range interpolated&quot; loctype  and gave the center of Arlington County</li></ul></li><li>Manually edited the errors by removing the Unit Number and re-ran. 4 Errors remained<ul><li>Compared address to the one that google ultimately used and deemed ok</li></ul></li></ul><p>These were then placed with Census Tract. 56 had lat and lon outside of the Arlington County boundaries (multiple jurisdictions). These did not receive a census tract</p><h3 id="Geocoding-BlackKnightAddresses">BlackKnight Addresses</h3><p><span style="color: rgb(0,0,0);">After merging the addresses from BKFS to Arlington County's, there were 5,722 new address to geocode. These were added to the Master Address List.</span></p><h3 id="Geocoding-MRISAddresses">MRIS Addresses</h3><p><span style="color: rgb(0,0,0);">After merging the addresses from BKFS to Arlington County's, there were ~8000 new address to geocode. Many of these were because of difference in the street name (e.g. N Fenwick st vs Fenwick St). It was also necessary to remove the &quot;#&quot; from the units in the addresses and the google API did not fully recognize them and would misplace the address.</span></p><p><span style="color: rgb(0,0,0);">During the first run, there were 1294 that needed to be clean and re run as they had non-rooftop locations.</span></p><p><span style="color: rgb(0,0,0);"> These were still geocode and added to the Master Address List. Another option would have been probability matching if the data set was larger. Due To missing APNS in the MRIS, geocoding everything allowed dataset to be merged with MRIS by latitude and longitude.</span></p><h3 id="Geocoding-CoreLogic"><span style="color: rgb(46,91,125);">CoreLogic</span></h3><p>CoreLogic (CL) data came with latitudes and longitudes. When checking Arlington County's CL data, we discovered that they are consistent from 2009 to 2012. In 2013, 4,717 (8%) changes. this difference on average is equivalent to about 1 foot—the largest difference results in about 980 feet.</p><p>As addresses were difficult to merge on due to structure (~16,000 didn't match at some level), merged by APN instead.<span style="color: rgb(0,0,0);"> </span></p><p style="margin-left: 30.0px;">Between 2009 to 2013, 75 APNs in CoreLogic were not in any of the final county's data (were removed when going from parcel to housing units). In addition, 24 were not geocoded as within Arlington (on the border).<span style="color: rgb(0,0,0);"> </span></p><p>For James City County:</p><ul><li>6 did not have any address so were dropped.</li><li>24 street names were &quot;The&quot; and the mode &quot;GRN&quot;. These were changed to &quot;the green&quot;.</li><li>6 street names were &quot;east&quot; and the mode &quot;Lndg&quot;. These were changed to the landing</li><li>1 did not have addresses google could find near the area and could not find a fix. These were removed</li></ul></div>
</div>
</div>
</div>
                    </div>

                    
                                                      
                </div>             </div> 
            <div id="footer">
                <section class="footer-body">
                    <p>Document generated by Confluence on 04 Jan 2016 11:04</p>
                </section>
            </div>
        </div>     </body>
</html>
